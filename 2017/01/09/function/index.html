<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>function | Ge Yulong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="概述函数就是一段可以反复调用的代码块。函数还能接受输入的参数，不同的参数会返回不同的值。JavaScript有三种方法，可以声明一个函数。">
<meta name="keywords" content="JavaScript,ruanyifeng,book">
<meta property="og:type" content="article">
<meta property="og:title" content="function">
<meta property="og:url" content="http://yulongge.github.io/2017/01/09/function/index.html">
<meta property="og:site_name" content="Ge Yulong">
<meta property="og:description" content="概述函数就是一段可以反复调用的代码块。函数还能接受输入的参数，不同的参数会返回不同的值。JavaScript有三种方法，可以声明一个函数。">
<meta property="og:updated_time" content="2017-06-13T15:51:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="function">
<meta name="twitter:description" content="概述函数就是一段可以反复调用的代码块。函数还能接受输入的参数，不同的参数会返回不同的值。JavaScript有三种方法，可以声明一个函数。">
  
    <link rel="alternate" href="/atom.xml" title="Ge Yulong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Ge Yulong</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">web</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yulongge.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-function" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/09/function/" class="article-date">
  <time datetime="2017-01-09T08:53:51.000Z" itemprop="datePublished">2017-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      function
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>函数就是一段可以反复调用的代码块。函数还能接受输入的参数，不同的参数会返回不同的值。JavaScript有三种方法，可以声明一个函数。<br><a id="more"></a></p>
<h3 id="函数的声明"><a href="#函数的声明" class="headerlink" title="函数的声明"></a>函数的声明</h3><ol>
<li>function命令<br>function命令声明的代码区块，就是一个函数。function命令后面是函数名，函数名后面是一对圆括号，里面是传入函数的参数。函数体放在大括号里面。<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params">s</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(s)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>这叫函数的声明(Function declareation).</p>
<ol>
<li>函数表达式<br>除了用function命令声明函数，还可以采用变量赋值的写法。<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> print = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(s);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>这种写法将一个匿名函数赋值给变量。这时，这个匿名函数又称函数表达式(Function Expression)，因为赋值语句的等号右侧只能放表达式。<br>采用函数表达式声明函数时，function命令后面不带有函数名。如果加上函数名，该函数名只在函数体内部有效，在函数体外无效。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> print = <span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> x);</div><div class="line">&#125;;</div><div class="line">x; <span class="comment">//ReferenceError: x is not defined</span></div><div class="line">print() <span class="comment">//function</span></div></pre></td></tr></table></figure></p>
<p>上面代码在函数表达式中，加入了函数名x。这个x只在函数体内部可用，指代函数表达式本身，其他地方都不可用。这种写法的用处有两个，一是可以在函数体内部调用自身，而是方便除错(除错工具显示函数调用栈时，将显示函数名，而不是显示这里是一个匿名函数)，因此，下面形式声明函数也非常常见。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>需要注意的是，函数的表达式需要在语句的结尾加上分号，表示语句结束。而函数的声明在结尾的大括号后面不用加分号。总的来说这两种声明函数的方法，差别很细微。</p>
<ol>
<li>Function构造函数<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> <span class="built_in">Function</span>(</div><div class="line">    <span class="string">'x'</span>,</div><div class="line">    <span class="string">'y'</span>,</div><div class="line">    <span class="string">'return x+y'</span></div><div class="line">    )</div><div class="line"><span class="comment">//等同于</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> x+ y;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>Function构造函数接收三个参数，除了最后一个参数是add函数的函数体，其他参数都是add函数的参数。你可以传递任意数量的参数给Function构造函数，只有最后一个参数会被做函数体，如果只有一个参数，该参数就是函数体。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> <span class="built_in">Function</span>(</div><div class="line">    <span class="string">'return "hello world"'</span></div><div class="line">    )</div><div class="line"><span class="comment">//等同于</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'hello world'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Function构造函数可以不适用new命令，返回结果完全一样，总的来说这种声明函数的方式非常不直观，几乎无人使用。</p>
<h3 id="函数的重复声明"><a href="#函数的重复声明" class="headerlink" title="函数的重复声明"></a>函数的重复声明</h3><p>如果同一个函数被多次声明，后面的声明就会覆盖前面的声明。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//2</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</div><div class="line">  &#125;</div><div class="line">f()<span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<p>后一次的函数声明覆盖了前面一次。而且由于函数名的提升，前一次声明在任何时候都是无效的，这一点要特别注意。</p>
<h3 id="圆括号运算符return语句和递归"><a href="#圆括号运算符，return语句和递归" class="headerlink" title="圆括号运算符，return语句和递归"></a>圆括号运算符，return语句和递归</h3><p>JavaScript引擎遇到return语句，就直接返回return后面的那个表达式的值，后面即使还有语句，也不会得到执行。return语句不是必需的，如果没有的话，该函数就不返回任何值，或者返回undefined。</p>
<p>函数可以调用自身，这就是递归(recursion).</p>
<h3 id="第一等公民"><a href="#第一等公民" class="headerlink" title="第一等公民"></a>第一等公民</h3><p>JavaScript语言将函数看作一种值，与其它值(数值，字符串，布尔值等等)地位相同。凡是可以使用值的地方，就能使用函数。比如，可以把函数赋值给变量和对象的属性，也可以当做参数传入其他函数，或者作为函数的结果返回。函数只是一个可以执行的值，此外并无特殊之处。<br>由于函数与其他数据类型地位平等，所以在JavaScript中称函数为第一等公民。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> x + y;</div><div class="line">&#125;</div><div class="line"><span class="comment">//将函数赋值给一个变量</span></div><div class="line"><span class="keyword">var</span> operator = add;</div><div class="line"><span class="comment">//将函数作为参数和返回值</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">op</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> op;</div><div class="line">&#125;</div><div class="line">a(add)(<span class="number">1</span>, <span class="number">1</span>);</div></pre></td></tr></table></figure></p>
<h3 id="函数名的提升"><a href="#函数名的提升" class="headerlink" title="函数名的提升"></a>函数名的提升</h3><p>JavaScript引擎将函数名视同变量名，所以采用function命令声明函数时，整个函数会像变量声明一样，被提升到代码头部。所以下面的代码不会报错。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">f();</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>但是如果使用赋值语句定义函数，这样就不行。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">f();</div><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="comment">//typeError: undefined is not a function</span></div></pre></td></tr></table></figure></p>
<p>上面代码等同于下面的形式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f;</div><div class="line">f();</div><div class="line">f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>如果同时采用function命令和赋值语句声明同一个函数，最后总是采用赋值语句的定义。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'1'</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'2'</span>);</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<h3 id="不能再条件语句中声明函数"><a href="#不能再条件语句中声明函数" class="headerlink" title="不能再条件语句中声明函数"></a>不能再条件语句中声明函数</h3><p>根据ECMAScript的规范，不得在非函数的代码块中声明函数，最常见的情况就是if和try语句中。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(foo)&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">&#125; <span class="keyword">catch</span>(e)&#123;</div><div class="line">  <span class="built_in">console</span>.log(e);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>按照语言规范这是不合法的。但是实际情况是各家浏览器往往并不报错，能够运行。<br>但是由于存在匿名函数的提升，所以在条件语句中声明函数，可能是无效的，这是非常容易出错的地方。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="literal">false</span>)&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//不报错。</span></div></pre></td></tr></table></figure></p>
<p>只能使用函数表达式。</p>
<h2 id="函数的属性和方法"><a href="#函数的属性和方法" class="headerlink" title="函数的属性和方法"></a>函数的属性和方法</h2><h3 id="name属性"><a href="#name属性" class="headerlink" title="name属性"></a>name属性</h3><p>name属性返回紧跟function关键字之后的那个函数名。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">f1.name <span class="comment">//'f1'</span></div><div class="line"><span class="keyword">var</span> f2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">f2.name <span class="comment">//''</span></div><div class="line"><span class="keyword">var</span> f3 = <span class="function"><span class="keyword">function</span> <span class="title">myName</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">f3.name <span class="comment">//'myName'</span></div></pre></td></tr></table></figure></p>
<p>匿名函数的name属性总是wei空字符串。</p>
<h3 id="length属性"><a href="#length属性" class="headerlink" title="length属性"></a>length属性</h3><p>length属性返回函数预期传入的参数的个数，即函数定义之中的参数个数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>)</span>&#123;&#125;</div><div class="line">f.length <span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<p>length代表是定义时的参数个数。不管调用时输入了多少个参数，length属性始终等于2。<br>length属性提供了一种机制，判断定义时和调用时参数的差异，以便实现面向对象编程的”方法重载”(overload).</p>
<h3 id="tostring"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h3><p>函数的toString方法返回函数的源码。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  a();</div><div class="line">  b();</div><div class="line">  c();</div><div class="line">&#125;</div><div class="line"></div><div class="line">f.toString()</div><div class="line"><span class="comment">// function f() &#123;</span></div><div class="line"><span class="comment">//  a();</span></div><div class="line"><span class="comment">//  b();</span></div><div class="line"><span class="comment">//  c();</span></div><div class="line"><span class="comment">// &#125;</span></div></pre></td></tr></table></figure></p>
<p>函数内部的注释也可以返回<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;<span class="comment">/*</span></div><div class="line">  这是一个</div><div class="line">  多行注释</div><div class="line">*/&#125;</div><div class="line"></div><div class="line">f.toString()</div><div class="line"><span class="comment">// "function f()&#123;/*</span></div><div class="line"><span class="comment">//   这是一个</span></div><div class="line"><span class="comment">//   多行注释</span></div><div class="line"><span class="comment">// */&#125;"</span></div></pre></td></tr></table></figure></p>
<p>利用这一点，可以变相实现多行字符串。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> multiline = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> arr = fn.toString().split(<span class="string">'\n'</span>);</div><div class="line">  <span class="keyword">return</span> arr.slice(<span class="number">1</span>, arr.length<span class="number">-1</span>).join(<span class="string">'\n'</span>);</div><div class="line">&#125;</div><div class="line">funtion f()&#123;<span class="comment">/*</span></div><div class="line">            这是一个</div><div class="line">            多行注释</div><div class="line">*/&#125;</div><div class="line">multiline(f);</div><div class="line"><span class="comment">//"这是一个</span></div><div class="line"><span class="comment">//多行注释"</span></div></pre></td></tr></table></figure></p>
<h2 id="函数作用域"><a href="#函数作用域" class="headerlink" title="函数作用域"></a>函数作用域</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>作用域(scope)指的是变量存在的范围。JavaScript只有两种作用域:</p>
<ul>
<li>一种是全局作用域，变量在整个程序中一直存在，所有地方都可以读取；</li>
<li>另一种是函数作用域，变量只在函数内部存在。</li>
</ul>
<p>在函数外部声明的变量就是全局变量，它可以在函数内部读取。(global variable)<br>在函数内部定义的变量，外部无法读取，称为”局部变量”(local variable)<br>函数内部定义的变量，会在该作用域内覆盖同名全局变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> v = <span class="number">1</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> v = <span class="number">2</span>;</div><div class="line">  <span class="built_in">console</span>.log(v);</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//2;</span></div><div class="line">  v<span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<p>变量v同事在函数的外部和内部都有定义。结果，在函数内部定义，局部变量v覆盖了全局变量v。<br>注意：对于var命令来说，局部变量只能在函数内部声明，在其他区块中声明，一律都是全局变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</div><div class="line">  <span class="keyword">var</span> x = <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(x); <span class="comment">//5</span></div></pre></td></tr></table></figure></p>
<h3 id="函数内部的变量提升"><a href="#函数内部的变量提升" class="headerlink" title="函数内部的变量提升"></a>函数内部的变量提升</h3><p>与全局作用域一样，函数作用域内部也会产生”变量提升”现象。var命令声明的变量，不管在什么位置，变量声明都会被提升到函数体头部。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(x &gt; <span class="number">100</span>)&#123;</div><div class="line">    <span class="keyword">var</span> tmp = x - <span class="number">100</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//等同于</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> tmp;</div><div class="line">  <span class="keyword">if</span>(x&gt;<span class="number">100</span>)&#123;</div><div class="line">    tmp = x <span class="number">-100</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="函数本身的作用域"><a href="#函数本身的作用域" class="headerlink" title="函数本身的作用域"></a>函数本身的作用域</h3><p>函数本身也是一个值，也有自己的作用域。他的作用域与变量一样，就是其声明时所在的作用域，与其运行所在的作用域无关。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a =<span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a =<span class="number">2</span>;</div><div class="line">  x();</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<p>上面代码中，函数x是在函数f的外部声明的，所以它的作用域绑定外层，内部变量a不会得到函数f体内取值，所以输出1，而不是2.<br>总之，函数执行时所在的作用域，是定义时的作用域，而不是调用时所在的作用域。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">y</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</div><div class="line">  f();</div><div class="line">&#125;</div><div class="line">y(x);<span class="comment">//RefrenceError: a is not defined</span></div></pre></td></tr></table></figure></p>
<p>同样的，函数体内部声明的函数，作用域绑定在函数体内部。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(x);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> bar;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> x = <span class="number">2</span>;</div><div class="line"><span class="keyword">var</span> f = foo();</div><div class="line">f() <span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<p>正是这种机制构成了闭包。</p>
<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h3 id="概述"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>函数运行时，有时候需要提供外部数据，不同的外部数据会得到不同的结果，这种外部数据就叫参数。<br>函数的参数不是必需的，JavaScript允许省略参数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> a;</div><div class="line">&#125;</div><div class="line"></div><div class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// 1</span></div><div class="line">f(<span class="number">1</span>) <span class="comment">// 1</span></div><div class="line">f() <span class="comment">// undefined</span></div><div class="line"></div><div class="line">f.length <span class="comment">// 2</span></div></pre></td></tr></table></figure></p>
<p>运行时，无论提供多少参数(或者不提供参数)，JavaScript都不会报错。<br>被省略的参数的值就变为undefined。需要注意的是，函数的length属性与实际传入的参数个数无关，只反映函数预期传入的参数个数。<br>但是没办法只省略靠前的参数，而保留靠后的参数。如果一定要省略靠前的参数，只有显示传入undefined。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> a;</div><div class="line">&#125;</div><div class="line">f( ,<span class="number">1</span> ); <span class="comment">//SyntaxError: Unexppected token,(...)</span></div><div class="line">f(<span class="literal">undefined</span>, <span class="number">1</span>) <span class="comment">//undefined</span></div></pre></td></tr></table></figure></p>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><p>通过下面方法，可以为函数的参数设置默认值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">  a = a || <span class="number">1</span>;</div><div class="line">  <span class="keyword">return</span> a;</div><div class="line">&#125;</div><div class="line">f(<span class="string">''</span>) <span class="comment">//1</span></div><div class="line">f(<span class="number">0</span>) <span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<p>但是上面的函数不能避免0，null，false等值，所以要采用更为精确的写法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">  (a !== <span class="literal">undefined</span> &amp;&amp; a !== <span class="literal">null</span>) ? a = a : a=<span class="number">1</span>;</div><div class="line">  <span class="keyword">return</span> a;</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//1;</span></div><div class="line">  f(<span class="string">''</span>)<span class="comment">//""</span></div><div class="line">  f(<span class="number">0</span>) <span class="comment">//0</span></div></pre></td></tr></table></figure></p>
<h3 id="传递方式"><a href="#传递方式" class="headerlink" title="传递方式"></a>传递方式</h3><p>函数参数如果是原始类型的值(数值，字符串，布尔值)，传递方式是传递方式是传值传参(pass by value).这意味着，在函数体内修改参数值，不会影响到函数外部。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p = <span class="number">2</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">  p =<span class="number">3</span>;</div><div class="line">&#125;</div><div class="line">f(p); </div><div class="line">p<span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<p>变量p是一个原始类型的值，传入函数f的方式是传值传递。因此，在函数内部，p的值是原始值的拷贝，无论怎么修改，都不会影响到原始值。<br>但是如果函数参数是复合类型的值(数组，对象，其他函数)，传递方式是传址传递(pass by reference).也就是说，传入函数的原始地址，因此在函数内部修改参数，将会影响到原始值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">p</span>: <span class="number">1</span>&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">  o.p = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line">f(obj);</div><div class="line">obj.p <span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>如果函数内部修改的，不是参数对象的某个属性，而是替换掉整个参数，这时不会影响到原始值。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">o</span>)</span>&#123;</div><div class="line">  o = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</div><div class="line">&#125;</div><div class="line">f(obj);</div><div class="line">obj <span class="comment">//[1, 2, 3]</span></div></pre></td></tr></table></figure>
<p>在函数f内部，参数对象obj被整个替换成另一个值。这时不会影响到原始值。这时因为，形式参数(o)与实际参数obj存在一个赋值关系。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">o = obj;</div></pre></td></tr></table></figure></p>
<p>对象o的修改都会反映在obj身上。但是如果对o赋予了一个新的值，就等于切断了o与obj的联系，导致伺候修改都不会影响到obj。<br>某些情况下，如果需要对某个原始类型的变量，获取传址的效果，可以将它写成全局对象的属性。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a  = <span class="number">1</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">  <span class="built_in">window</span>[p] = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line">f(<span class="string">'a'</span>);</div><div class="line">a<span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<p>变量a本来是传值传递，但写成window对象的属性，就达到了传址的效果。</p>
<h3 id="同名参数"><a href="#同名参数" class="headerlink" title="同名参数"></a>同名参数</h3><p>如果有同名参数，则取最后出现的那个值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a,a</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);</div><div class="line">&#125;</div><div class="line">f(<span class="number">1</span>,<span class="number">2</span>);<span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<p>上面的函数f有两个参数，且参数名都是a。取值的时候，以后吗的a为准。及时后面的a没有值或被省略，也是以其为准。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a,a</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);</div><div class="line">&#125;</div><div class="line">f(<span class="number">1</span>) <span class="comment">//undefined</span></div></pre></td></tr></table></figure></p>
<p>调用函数f的时候，没有提供第二个参数，a的值就变成了undefined。这时，如果要获取第一个a的值，可以使用arguments对象。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, a</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</div><div class="line">&#125;</div><div class="line">f(<span class="number">1</span>); <span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<h3 id="arguments对象"><a href="#arguments对象" class="headerlink" title="arguments对象"></a>arguments对象</h3><h4 id="定义"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>由于JavaScript允许函数有不定数目的参数，所以我们需要一种机制，可以在函数体内部读取所有参数。这就是arguments对象由来。<br>arguments对象包含了函数运行时的所有参数，arugments[0]就是第一个参数，arguments[1]就是第二个参数，以此类推。这个对象只有在函数体内，才可以使用。</p>
<p>arguments对象除了可以读取参数，还可以为参数赋值(严格模式不允许这样用法)。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">3</span>;</div><div class="line">  <span class="built_in">arguments</span>[<span class="number">1</span>] = <span class="number">2</span>;</div><div class="line">  <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div><div class="line">f(<span class="number">1</span>, <span class="number">1</span>) <span class="comment">//5</span></div></pre></td></tr></table></figure></p>
<p>可以通过arguments对象的length属性，判断函数调用时到底带几个参数。</p>
<h4 id="与数组的关系"><a href="#与数组的关系" class="headerlink" title="与数组的关系"></a>与数组的关系</h4><p>需要注意的是，虽然arguments很像数组，但它是一个对象。数组转有的方法比如slice和forEach不能再arguments对象上直接使用。<br>但是可以通过apply方法，把arguments作为参数传进去，这样就可以让arguments使用数组方法了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//用于apply方法</span></div><div class="line">myfunction.apply(obj, <span class="built_in">arguments</span>);</div><div class="line"></div><div class="line"><span class="comment">//使用与另一个数组的合并</span></div><div class="line"><span class="built_in">Array</span>.prototype.concat.apply([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="built_in">arguments</span>);</div></pre></td></tr></table></figure></p>
<p>要让arguments对象使用数组的方法，真正的解决方法是将arguments转为真正的数组。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</div><div class="line"><span class="comment">//or</span></div><div class="line"><span class="keyword">var</span> args = [];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="built_in">arguments</span>.length;i++)&#123;</div><div class="line">  args.push(<span class="built_in">arguments</span>[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="callee属性"><a href="#callee属性" class="headerlink" title="callee属性"></a>callee属性</h4><p>arguments对象带有一个callee属性，返回它所对应的原函数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">one</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee === f);</div><div class="line">&#125;</div><div class="line">f() <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>可以通过argumetns.callee，达到调用函数自身的目的。这个属性在严格模式下是禁用的，因此不建议使用。。。。</p>
<h2 id="函数其他的知识点"><a href="#函数其他的知识点" class="headerlink" title="函数其他的知识点"></a>函数其他的知识点</h2><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包(closure)是JavaScript语言的一个难点，也是它的特色，很多高级应用都是依赖闭包实现的。<br>要理解闭包，首先必须理解变量作用域。前面提到，JavaScript有两种作用域：全局和函数作用域。函数内部可以直接读取全局变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> n = <span class="number">999</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(n);</div><div class="line">&#125;</div><div class="line">f1(); <span class="comment">// 999</span></div></pre></td></tr></table></figure></p>
<p>但是函数外部不发读取函数内部声明的变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> n = <span class="number">999</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(n);</div><div class="line"><span class="comment">//Uncaught ReferenceError: n is not defined</span></div></pre></td></tr></table></figure></p>
<p>如果出于种种原因，需要得到函数内部的局部变量。正常情况下，这是办不到的，只有通过变通方法才能实现。那就是在函数内部，再定义一个函数。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> n = <span class="number">999</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(n); <span class="comment">//999</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这就是JavaScript语言特有的”链式作用域”结构(chain scope),子对象会一级一级地向上寻找到所有父对象的变量。所以父对象的所有的变量，对自变量都是可见的，反之则不成立。<br>我们只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> n = <span class="number">999</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(n);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> f2();</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> result = f1();</div><div class="line">result(); <span class="comment">// 999</span></div></pre></td></tr></table></figure></p>
<p>闭包就是函数f2,即能够读取其他函数内部变量的函数。由于在JavaScript语言中，只用函数内部的子函数才能读取内部变量，因此可以把闭包简单理解成”定义在一个函数内部的函数”。闭包最大的特点，就是它可以”记住”诞生的环境，比如f2记住了它诞生的环境f1，所以从f2可以得到f1的内部变量。在本质上，闭包就是将函数内部和函数外部链接起来的一座桥梁。</p>
<p>闭包的最大用处有两个：</p>
<ul>
<li>可以读取函数内部的变量</li>
<li>让这些变量始终保持在内存中，即闭包可以使它的诞生环境一直存在。</li>
</ul>
<p>闭包使得内部变量记住上一次调用时的运算结果。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createIncrementor</span>(<span class="params">start</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> start++;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> inc = createIncrementor(<span class="number">5</span>);</div><div class="line">inc(); <span class="comment">//5</span></div><div class="line">inc(); <span class="comment">//6</span></div><div class="line">inc(); <span class="comment">//7</span></div></pre></td></tr></table></figure></p>
<p>start是函数createIncrementor的内部变量。通过闭包，start的状态被保留了，每一次调用都是在上一次调用的基础上进行计算。从中可以看到，闭包inc使得函数createIncrementor的内部环境，一直存在。所以闭包可以看作是函数内部作用域的一个接口。<br>为什么会这样呢？原因就在于inc始终存在内存中，而inc的存在依赖于createIncrementor,因此也始终在内存中，不会在调用结束后，被垃圾回收机制回收。</p>
<p>闭包的另一个用处就是，封装对象的私有属性和私有方法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> _age;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setAge</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">    _age = n;</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _age;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line"><span class="attr">name</span>: name,</div><div class="line">        <span class="attr">getAge</span>: getAge,</div><div class="line">        <span class="attr">setAge</span>: setAge</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> p1 = Person(<span class="string">'张三'</span>);</div><div class="line">p1.setAge(<span class="number">25</span>)；</div><div class="line">p1.getAge() <span class="comment">//25</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>外层函数每次运行，都会生成一个新的闭包，而这个闭包又会保留外层函数的内部变量，所以内存消耗很大。因此不能滥用闭包，否则会造成网页的性能问题。</p>
</blockquote>
<h3 id="立即调用的函数表达式iife"><a href="#立即调用的函数表达式-IIFE" class="headerlink" title="立即调用的函数表达式(IIFE)"></a>立即调用的函数表达式(IIFE)</h3><p>在JavaScript中，一对圆括号()是一种运算符，跟在函数名之后，表示调用该函数。比如print()就表示调用print函数。<br>有时，我们需要在定义函数之后，立即调用该函数。这时，你不能再函数的定义之后加上圆括号，这会产生语法错误。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="comment">/* code */</span>&#125;();</div><div class="line"><span class="comment">//SyntaxError: Unexpected token(</span></div></pre></td></tr></table></figure></p>
<p>产生这个错误的原因是，function这个关键字即可以当做主语，也可以当作表达式。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//语句</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="comment">//表达式</span></div><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>为了避免解析上的歧义，JavaScript引擎规定，如果function关键字出现在行首，一律解释成语句。因此JavaScript引擎看到行首是function关键字之后，认为这一段都是函数的定义，不应该以圆括号结尾，所以就报错了。<br>解决方法就是不要让function出现在行首，让引擎将其理解成一个表达式。最简单的处理，就是将其放在一个圆括号里。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;());</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;());</div></pre></td></tr></table></figure></p>
<p>上面两种写法都是以圆括号开头，引擎就会认为后面跟的是一个表达式而不是函数定义语句，所以就避免了错误。这就叫做立即调用函数表达式(Immediately-Invoked Function Expression),简称IIFE。</p>
<blockquote>
<p>上面两种写法最后的分号都是必须的。如果省略分号，遇到连着两个IIFE，可能会报错。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;())</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;())</div><div class="line"><span class="comment">//错误</span></div></pre></td></tr></table></figure>
<p>上面代码两行之间没有分号，JavaScript会将他们连在一起解释，将第二行解释为第一行的参数。<br>推而广之，任何让解释器以表达式来处理的函数定义方法，都能产生同样的效果。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> i = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="number">10</span>;&#125;();</div><div class="line"><span class="literal">true</span> &amp;&amp; <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;();</div><div class="line"><span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</div></pre></td></tr></table></figure></p>
<p>甚至写成下面，也可以。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;();</div><div class="line">~<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;();</div><div class="line">-<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;();</div><div class="line">+<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">/* code */</span>&#125;();</div></pre></td></tr></table></figure></p>
<p>new 关键字也能达到这个效果<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line"><span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</div><div class="line"><span class="comment">//只有传递参数时，才需要最后那个圆括号</span></div></pre></td></tr></table></figure></p>
<p>通常情况下，只对匿名函数使用这种立即执行的函数表达式。它的目的有两种.</p>
<ul>
<li>不必为函数命名，避免了污染全局变量</li>
<li>IIFE内部形成了一个单独的作用域，可以封装一些外部无法读取的私有变量。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 写法一</span></div><div class="line"><span class="keyword">var</span> tmp = newData;</div><div class="line">processData(tmp);</div><div class="line">storeData(tmp);</div><div class="line"></div><div class="line"><span class="comment">// 写法二</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> tmp = newData;</div><div class="line">  processData(tmp);</div><div class="line">  storeData(tmp);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>第二种写法好点。避免了污染全局变量。</p>
<h3 id="eval命令"><a href="#eval命令" class="headerlink" title="eval命令"></a>eval命令</h3><p>eval命令的作用是，将字符串当作语句执行。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span>(<span class="string">'var a = 1;'</span>);</div><div class="line">a <span class="comment">//1;</span></div></pre></td></tr></table></figure></p>
<p>上面代码将字符串当作语句运行，生成了变量a。<br>放在eval中的字符串，应该有独立存在的意义，不能用来与eval以外的命令配合使用。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span>(<span class="string">'return;'</span>);</div><div class="line"><span class="comment">//会报错</span></div></pre></td></tr></table></figure></p>
<p>eval没有自己的作用域，都在当前作用域内执行，因此可能会修改当前作用域的变量的值，造成安全问题。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"><span class="built_in">eval</span>(<span class="string">'a = 2;'</span>);</div><div class="line">a<span class="comment">//2</span></div></pre></td></tr></table></figure></p>
<p>eval命令修改了外部变量a的值。由于这个原因，eval有安全风险。<br>为了防止这种风险，JavaScript规定，如果使用严格模式，eval内部声明的变量不会影响到外部作用域。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="meta"> 'use strict'</span>;</div><div class="line"> <span class="built_in">eval</span>(<span class="string">'var foo = 123'</span>);</div><div class="line"> <span class="built_in">console</span>.log(foo);<span class="comment">// ReferenceError: foo is not defined</span></div><div class="line"> &#125;)</div></pre></td></tr></table></figure></p>
<p>函数f内部是严格模式，这时，eval内部声明的变量foo，就不会影响到外部。不过即使在严格模式下，eval依然可以读写当前作用域的变量。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="string">'use strick'</span>;</div><div class="line">  <span class="keyword">var</span> foo = <span class="number">1</span>;</div><div class="line">  <span class="built_in">eval</span>(<span class="string">'foo = 2'</span>);</div><div class="line">  <span class="built_in">console</span>.log(foo); <span class="comment">//2</span></div><div class="line"> &#125;)()</div></pre></td></tr></table></figure></p>
<p>可见在严格模式下，eval内部还是改写了外部变量，安全风险依然存在。<br>此外，eval的命令字符串不会得到JavaScript引擎的优化，运行速度较慢。这也是一个不应该使用它的理由。<br>通常情况下，eval最常见的是场合是解析JSON数据字符串，不过正确的做法应该是，使用浏览器提供的JSON.parse方法。<br>JavaScript引擎内部，eval实际上是一个引用，默认调用一个内部方法。这使得eval的使用分成两种情况，一种像上面这样调用eval(expression),这叫做直接使用，这种情况的作用域就是当前作用域。除此之外的调用方式，都叫间接调用，此时eval的作用域总是全局作用域。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</div><div class="line">  <span class="keyword">var</span> e = <span class="built_in">eval</span>;</div><div class="line">  e(<span class="string">'console.log(a)'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">f() <span class="comment">// 1</span></div></pre></td></tr></table></figure></p>
<p>上面代码中，eval是间接调用，所以即使它是在函数中，它的作用域还是全局作用域，因此输出的a为全局变量。<br>eval的间接调用方式五花八门，只要不是直接调用，都属于间接调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span>.call(<span class="literal">null</span>, <span class="string">'....'</span>);</div><div class="line"><span class="built_in">window</span>.eval(<span class="string">'...'</span>);</div><div class="line">(<span class="number">1</span>, <span class="built_in">eval</span>)(<span class="string">'...'</span>);</div><div class="line">(<span class="built_in">eval</span>, <span class="built_in">eval</span>)(<span class="string">'...'</span>)</div></pre></td></tr></table></figure>
<p>与eval作用类似的还有Function构造函数。利用它生成一个函数，然后调用该函数，也能将字符串当作命令执行.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> jsonp  = <span class="string">'foo(&#123;"id": 42&#125;)'</span>;</div><div class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'foo'</span> jsonp);</div><div class="line"><span class="comment">//相当于定义了如下函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">foo</span>)</span>&#123;</div><div class="line">  foo(&#123;<span class="string">"id"</span>: <span class="number">42</span>&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>new Function()的写法也可以读写全局作用域，所以也是应该避免使用它。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yulongge.github.io/2017/01/09/function/" data-id="cj4p6jhm2002rcxs6cktpuxhb" class="article-share-link">Partager</a>
      
        <a href="http://yulongge.github.io/2017/01/09/function/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/book/">book</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruanyifeng/">ruanyifeng</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/01/10/data-type-conversion/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          数据类型转换
        
      </div>
    </a>
  
  
    <a href="/2017/01/09/array/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">array</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Event/">Event</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JSON/">JSON</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/web/JSONP/">JSONP</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/ES6/">ES6</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/ES6/Promise/">Promise</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/book/">book</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/http/https/">https</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iTerm2/">iTerm2</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mvvm/">mvvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mvvm/mvc/">mvc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mvvm/mvc/mvp/">mvp</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/JavaScript/">JavaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/JavaScript/Promise/">Promise</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/JavaScript/css/">css</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Context/">Context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/">Cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event/">Event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSONP/">JSONP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JvaScript/">JvaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RegExp/">RegExp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scope/">Scope</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Storage/">Storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/URI/">URI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event/">event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iTerm2/">iTerm2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvc/">mvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvp/">mvp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvvm/">mvvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruanyifeng/">ruanyifeng</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Context/" style="font-size: 10px;">Context</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/Event/" style="font-size: 10px;">Event</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/JSONP/" style="font-size: 10px;">JSONP</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/JvaScript/" style="font-size: 10px;">JvaScript</a> <a href="/tags/Promise/" style="font-size: 12.5px;">Promise</a> <a href="/tags/RegExp/" style="font-size: 12.5px;">RegExp</a> <a href="/tags/Scope/" style="font-size: 10px;">Scope</a> <a href="/tags/Storage/" style="font-size: 10px;">Storage</a> <a href="/tags/URI/" style="font-size: 12.5px;">URI</a> <a href="/tags/book/" style="font-size: 17.5px;">book</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/iTerm2/" style="font-size: 10px;">iTerm2</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mvc/" style="font-size: 10px;">mvc</a> <a href="/tags/mvp/" style="font-size: 10px;">mvp</a> <a href="/tags/mvvm/" style="font-size: 10px;">mvvm</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/ruanyifeng/" style="font-size: 17.5px;">ruanyifeng</a> <a href="/tags/this/" style="font-size: 12.5px;">this</a> <a href="/tags/vim/" style="font-size: 12.5px;">vim</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/04/studyInsight/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/06/13/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/01/24/this/">this</a>
          </li>
        
          <li>
            <a href="/2017/01/23/npm/">从头开始写一个npm包</a>
          </li>
        
          <li>
            <a href="/2017/01/17/StringAPI/">String API</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Ge Yulong<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'yulongge-github-io';
  
  var disqus_url = 'http://yulongge.github.io/2017/01/09/function/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>