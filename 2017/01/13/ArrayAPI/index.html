<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Array API | Ge Yulong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="构造函数Array是JavaScript的内置对象，同时也是一个构造函数，可以用它生成新的数组。">
<meta name="keywords" content="JavaScript,ruanyifeng,book">
<meta property="og:type" content="article">
<meta property="og:title" content="Array API">
<meta property="og:url" content="http://yulongge.github.io/2017/01/13/ArrayAPI/index.html">
<meta property="og:site_name" content="Ge Yulong">
<meta property="og:description" content="构造函数Array是JavaScript的内置对象，同时也是一个构造函数，可以用它生成新的数组。">
<meta property="og:updated_time" content="2017-06-13T15:51:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Array API">
<meta name="twitter:description" content="构造函数Array是JavaScript的内置对象，同时也是一个构造函数，可以用它生成新的数组。">
  
    <link rel="alternate" href="/atom.xml" title="Ge Yulong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Ge Yulong</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">web</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yulongge.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ArrayAPI" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/13/ArrayAPI/" class="article-date">
  <time datetime="2017-01-13T07:26:54.000Z" itemprop="datePublished">2017-01-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Array API
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>Array是JavaScript的内置对象，同时也是一个构造函数，可以用它生成新的数组。<br><a id="more"></a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>);</div><div class="line">arr.length; <span class="comment">//2</span></div><div class="line">arr; <span class="comment">//[undefined * 2]</span></div></pre></td></tr></table></figure></p>
<p>Array构造函数的参数2，表示生成一个两个成员的数组，每个位置都是空值。如果没有使用new，运行结果也是一样的。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>);</div><div class="line"><span class="comment">//等同于</span></div><div class="line"><span class="keyword">var</span> arr = <span class="built_in">Array</span>(<span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<p>Array构造函数有一个很大的问题，就是不同的参数，会导致它们的行为不一致。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//无参数时，返回一个空数组</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">//[]</span></div><div class="line"></div><div class="line"><span class="comment">//单个正数参数，表示返回的新数组的长度</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>);</div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">//非整数的数值作为参数，会报错</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3.2</span>); <span class="comment">//RangeError: Invalid array length</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">-3</span>); <span class="comment">//RageError: Invalid array length</span></div><div class="line"></div><div class="line"><span class="comment">//单个非正整数参数(比如字符串，布尔值，对象等)</span></div><div class="line"><span class="comment">//则该参数是返回新的数组成员</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'abc'</span>); <span class="comment">//['abc'];</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>([<span class="number">2</span>]); <span class="comment">//[Array[2]]</span></div><div class="line"></div><div class="line"><span class="comment">//多参数时，所有参数都是返回的新数组的成员</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">//[1, 3]</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>); <span class="comment">//['a', 'b', 'c']</span></div></pre></td></tr></table></figure></p>
<p>可以看到，Array作为构造参数，行为很不一致。因此不建议用它生成新的数组，直接使用数组字面量是更好的方法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//bad</span></div><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">//good</span></div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</div></pre></td></tr></table></figure></p>
<blockquote>
<p>如果参数是一个正整数，返回数组的成员都是空位。虽然读取的时候返回undefined，但是实际上该位置没有任何值。虽然可以读取到length属性，但是取不到键名。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>);</div><div class="line">arr.length ; <span class="comment">//3</span></div><div class="line">arr[<span class="number">0</span>]; <span class="comment">//undefined</span></div><div class="line">arr[<span class="number">1</span>]; <span class="comment">//undefined</span></div><div class="line">arr[<span class="number">2</span>]; <span class="comment">//undefiend</span></div><div class="line"></div><div class="line"><span class="number">0</span> <span class="keyword">in</span> arr <span class="comment">//false</span></div><div class="line"><span class="number">1</span> <span class="keyword">in</span> arr <span class="comment">//false</span></div><div class="line"><span class="number">2</span> <span class="keyword">in</span> arr <span class="comment">//false</span></div></pre></td></tr></table></figure>
<p>arr是一个长度为3的空数组。虽然可以取到每个位置的键值undefined，但是所有键名都取不到。</p>
<h2 id="arrayisarray"><a href="#Array-isArray" class="headerlink" title="Array.isArray()"></a>Array.isArray()</h2><p>该方法用来判断一个值是否为数组。它可以弥补typeof运算符的不足。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="keyword">typeof</span> a <span class="comment">//"object"</span></div><div class="line"><span class="built_in">Array</span>.isArray(a); <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p>typeof运算符只能显示数组的类型是Object，而Array.isArray方法可以对数组返回true。</p>
<h2 id="array实例的方法"><a href="#Array实例的方法" class="headerlink" title="Array实例的方法"></a>Array实例的方法</h2><ol>
<li><p>valueOf() &amp; toString()<br>valueOf方法返回数组本身。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>];</div><div class="line">a.valueOf(); <span class="comment">//[1,2,3]</span></div></pre></td></tr></table></figure>
<p>toString方法返回数组的字符串形式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">a.toString(); <span class="comment">//"1,2,3"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]];</div><div class="line">a.toString(); <span class="comment">//"1,2,3,4,5,6"</span></div></pre></td></tr></table></figure>
</li>
<li><p>push()<br>该方法用于在数组的末端添加一个或多个元素，并返回添加新元素后的数组长度。该方法会改变原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [];</div><div class="line">a.push(<span class="number">1</span>); <span class="comment">//1</span></div><div class="line">a.push(<span class="string">'a'</span>); <span class="comment">//2</span></div><div class="line">a.push(<span class="literal">true</span>, &#123;&#125;); <span class="comment">//4</span></div><div class="line">a <span class="comment">//[1, 'a', true, &#123;&#125;]</span></div></pre></td></tr></table></figure>
<p>如果要合并两个数组，可以这样。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a  = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> b  = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</div><div class="line"></div><div class="line">Arrya.prototype.push.apply(a, b);</div><div class="line"><span class="comment">//or</span></div><div class="line">a.push.apply(a, b);</div><div class="line"></div><div class="line"><span class="comment">//equal</span></div><div class="line">a.push(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</div><div class="line">a <span class="comment">//[1, 2, 3, 4, 5, 6]</span></div></pre></td></tr></table></figure>
<p>push方法还可以用于向对象添加元素，添加后的对象编程类似数组的对象，即新加入元素的键对应数组的索引，并且对象有一个length属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</div><div class="line">[].push.call(a, <span class="number">2</span>);</div><div class="line">[].push.call(a, [<span class="number">3</span>]);</div><div class="line">a<span class="comment">//[a: 1, 0: 2, 1:[3], length: 2]</span></div></pre></td></tr></table></figure>
</li>
<li><p>pop()<br>该方法用于删除数组的最后一个元素，并返回该元素。注意该方法会改变原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.pop() <span class="comment">//c</span></div><div class="line">a <span class="comment">//['a', 'b']</span></div></pre></td></tr></table></figure>
<p>对空数组使用pop方法，不会报错，而是返回undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[].pop() <span class="comment">//undefined</span></div></pre></td></tr></table></figure>
<p>push 和 pop结合使用，就构成了”后进先出”的栈结构(stack)。</p>
</li>
<li><p>join()<br>该方法以参数作为分隔符，将所有数组成员组成一个字符串返回。如果不提供参数，默认使用逗号分隔。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</div><div class="line">a.join(<span class="string">' '</span>); <span class="comment">//'1 2 3 4'</span></div><div class="line">a.join(<span class="string">' | '</span>); <span class="comment">// "1 | 2 | 3 | 4"</span></div><div class="line">a.join(); <span class="comment">//"1, 2, 3, 4"</span></div></pre></td></tr></table></figure>
<p>如果数组成员是undefined或null或空位，会被转成空字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="literal">undefined</span>, <span class="literal">null</span>].join(<span class="string">'#'</span>); <span class="comment">//#</span></div><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>].join(<span class="string">'-'</span>); <span class="comment">// 'a--b'</span></div></pre></td></tr></table></figure>
<p>通过call方法，这个方法也可以用于字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.join.call(<span class="string">'hello'</span>, <span class="string">'-'</span>);</div><div class="line"><span class="comment">//'h-e-l-l-o'</span></div></pre></td></tr></table></figure>
<p>join方法也可以用于类似数组的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="number">0</span>: <span class="string">'a'</span>, <span class="number">1</span>: <span class="string">'b'</span>, <span class="attr">length</span>: <span class="number">2</span>&#125;;</div><div class="line"><span class="built_in">Array</span>.prototype.join.call(obj, <span class="string">'-'</span>); <span class="comment">//'a-b'</span></div></pre></td></tr></table></figure>
</li>
<li><p>concat()<br>该方法用于多个数组的合并。它将新数组的成员，添加到原数组的尾部，然后返回一个新数组，原数组不变。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'hellow'</span>].concat([<span class="string">'world'</span>]); <span class="comment">//["hello", "world"]</span></div><div class="line">[<span class="string">"hello"</span>].concat([<span class="string">'world'</span>], [<span class="string">'!'</span>]); <span class="comment">// ["hello", "world", "!"]</span></div></pre></td></tr></table></figure>
<p>除了接受数组作为参数，concat也可以接受其他类型的值作为参数。他们会为新元素，添加到数组尾部。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].concat(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>); <span class="comment">//[1, 2, 3, 4, 5, 6]</span></div><div class="line"><span class="comment">//equal</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].concat(<span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>]);</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].concat([<span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]);</div></pre></td></tr></table></figure>
<p>如果不提供参数，concat方法返回当前数组的一个浅拷贝。所谓浅拷贝，指的是如果数组成员包括复合类型的值(比如对象)，则新数组拷贝的是该值的引用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>:<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> oldArray = [obj];</div><div class="line"><span class="keyword">var</span> newArray = oldArray.concat();</div><div class="line">obj.a = <span class="number">2</span>;</div><div class="line">newArray[<span class="number">0</span>].a <span class="comment">//2</span></div></pre></td></tr></table></figure>
<p>代码中原数组包含一个对象，concat方法生成的新数组包含这个对象的引用。所以，改变原对象以后，新数组跟着改变。事实上，只要原数组的成员中包含对象，concat方法不管有没有参数，总是返回对象的引用。</p>
<p>concat方法也可以用于将对象合并为数组，但是必须借助于call方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[].concat.call(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;,&#123;<span class="attr">b</span>:<span class="number">2</span>&#125;) <span class="comment">// [&#123;a:1&#125;,&#123;b:2&#125;]</span></div><div class="line">[].concat.call(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;,[<span class="number">2</span>]) <span class="comment">//[&#123;a:1&#125;,[2]]</span></div><div class="line">[<span class="number">2</span>].concat(&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;);</div></pre></td></tr></table></figure>
<p>其实不用call也是可以的(亲测)</p>
</li>
<li><p>shift()<br>shift方法用于用于删除数组的第一个元素，并返回该元素。该方法会改变原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.shift(); <span class="comment">//'a'</span></div><div class="line">a <span class="comment">//['b', 'c']</span></div></pre></td></tr></table></figure>
<p>shift方法可以遍历并清空一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> list  = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ,<span class="number">6</span>];</div><div class="line"><span class="keyword">var</span> item;</div><div class="line"><span class="keyword">while</span>(item === list.shift())&#123;</div><div class="line">  <span class="built_in">console</span>.log(item);</div><div class="line">&#125;</div><div class="line">list <span class="comment">//[]</span></div></pre></td></tr></table></figure>
<p>push 和shift结合使用，就构成了”先进先出”的队列结构(queue)</p>
</li>
<li><p>unshift()<br>方法用于在数组第一个位置添加元素，并返回添加新元素的数组长度，该方法会改变原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.unshift(<span class="string">'x'</span>);<span class="comment">//4</span></div><div class="line">a <span class="comment">//['x', 'a', 'b', 'c']</span></div><div class="line"></div><div class="line">a.unshift(<span class="string">'a'</span>, <span class="string">'b'</span>) <span class="comment">//6</span></div><div class="line">a<span class="comment">//['a', 'b', 'x', 'a', 'b', 'c']</span></div></pre></td></tr></table></figure>
</li>
<li><p>reverse()<br>该方法用于颠倒数组中元素的顺序，返回改变后的数组，该方法将改变原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.reverse() <span class="comment">//['c', 'b', 'a']</span></div><div class="line">a <span class="comment">//['c', 'b', 'a']</span></div></pre></td></tr></table></figure>
</li>
<li><p>slice()<br>该方法用于提取原数组的一部分，返回一个新数组，原数组不变。<br>它的第一个参数为起始位置(从0开始)，第二个参数为终止位置(但该位置元素本身不包含在内)。如果省略第二个参数，则一直返回原数组的最后一个。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//格式</span></div><div class="line">arr.slice(start_index, upto_index);</div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.slice(<span class="number">0</span>); <span class="comment">//['a', 'b', 'c']</span></div><div class="line">a.slice(<span class="number">1</span>); <span class="comment">//['b', 'c']</span></div><div class="line">a.slice(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">//['b']</span></div><div class="line">a.slice(<span class="number">2</span>, <span class="number">6</span>) <span class="comment">//['c']</span></div><div class="line">a.slice() <span class="comment">//['a', 'b', 'c']</span></div></pre></td></tr></table></figure>
<p>最后一个例子slice没有参数，实际上等于返回一个原数组的拷贝。<br>如果slice方法的参数是负数，则表示倒数计算的位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.slice(<span class="number">-2</span>) <span class="comment">//['b', 'c']</span></div><div class="line">a.slice(<span class="number">-2</span>, <span class="number">-1</span>) <span class="comment">//['b']</span></div></pre></td></tr></table></figure>
<p>-2表示倒数计算的第二个位置，-1表示倒数计数的第一个位置。<br>如果参数大于数组成员个数，或者第二个参数小于第一个参数，则返回空数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.slice(<span class="number">4</span>) <span class="comment">//[]</span></div><div class="line">a.slice(<span class="number">2</span>, <span class="number">1</span>) <span class="comment">//[]</span></div></pre></td></tr></table></figure>
<p>slice方法的一个重要应用，是将类似数组的对象转为真正的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.slice.call(&#123;<span class="number">0</span>: <span class="string">'a'</span>, <span class="number">1</span>: <span class="string">'b'</span>, <span class="attr">length</span>: <span class="number">2</span>&#125;); <span class="comment">//['a', 'b']</span></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'div'</span>));</div><div class="line"><span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</div></pre></td></tr></table></figure>
<p>代码中的参数都不是数组，但是通过call方法，在他们上面调用slice方法，就可以把它们转为真正的数组。</p>
</li>
<li><p>splice()<br>该方法用于删除原数组的一部分成员，并可以在被删除的位置添加入新的数组成员，返回值是被删除的元素。该方法会改变原数组。</p>
<p>splice的第一个参数是删除的起始位置，第二个参数是被删除的元素个数。如果后面还有更多的参数，则表示这些就是要插入数组的新元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//格式</span></div><div class="line">arr.splice(index, conunt_to_remove, addElement1, addElement2, ...);</div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>];</div><div class="line">a.splice(<span class="number">4</span>, <span class="number">2</span>) <span class="comment">//['e', 'f'];</span></div><div class="line">a<span class="comment">//['a', 'b', 'c', 'd']</span></div><div class="line"></div><div class="line"><span class="comment">//除了删除成员，还插入了两个新成员</span></div><div class="line">a.splice(<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">// ['f']</span></div><div class="line"></div><div class="line">a <span class="comment">//['a', 'b', 'c', '1', '2']</span></div><div class="line"></div><div class="line"><span class="comment">//如果起始位置是负数，就表示从倒数位置开始删除。</span></div><div class="line">a.splice(<span class="number">-4</span>,<span class="number">2</span>) <span class="comment">//['b','c']</span></div><div class="line">a<span class="comment">//['a', '1', '2']</span></div><div class="line"></div><div class="line"><span class="comment">//如果只是单纯的插入元素，splice方法的第二个参数可以设为0</span></div><div class="line">a.splice(<span class="number">1</span>,<span class="number">0</span>,<span class="string">'b'</span>) <span class="comment">//[]</span></div><div class="line">a <span class="comment">//['a', 'b', '1', '2']</span></div><div class="line"></div><div class="line"><span class="comment">//如果只提供一个参数，等同于将原来数组在指定位置拆分成两个数组。</span></div><div class="line"></div><div class="line">a.splice(<span class="number">2</span>) <span class="comment">//['1', 2]</span></div><div class="line">a <span class="comment">//['a', 'b']</span></div></pre></td></tr></table></figure>
</li>
<li><p>sort()<br>该方法对数组成员进行排序，默认是按照字典顺序排序，排序后，原数组将改变。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'d'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>].sort() <span class="comment">// ['a', 'b', 'c', 'd']</span></div><div class="line">[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>].sort() <span class="comment">//[1,2,3,4]</span></div><div class="line">[<span class="number">11</span>, <span class="number">101</span>].sort() <span class="comment">//[101, 11]</span></div><div class="line">[<span class="number">10111</span>, <span class="number">1101</span>, <span class="number">111</span>].sort() <span class="comment">// [10111, 1101, 111]</span></div></pre></td></tr></table></figure>
<p>sort方法不是按照大小排序，而是按照对应字符串的字典顺序排序。也就是说，数值会被先转成字符串，在按照字典顺序进行比较，所以101在11前面。</p>
<p>如果想让sort方法按照自定义方式排序，可以传入一个函数作为参数，表示按照自定义方法进行排序。该函数本身又接受两个参数，表示进行比较的两个元素。如果返回值大于0，表示第一个元素排在第二个元素的后面，其他情况下，都是第一个元素在第二个元素前面。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[<span class="number">10111</span>, <span class="number">1101</span>, <span class="number">111</span>].sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> a-b;</div><div class="line">    &#125;)</div><div class="line"><span class="comment">//[111, 1101, 10111]</span></div><div class="line"></div><div class="line">[</div><div class="line">&#123; <span class="attr">name</span>: <span class="string">'张三'</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</div><div class="line">&#123; <span class="attr">name</span>: <span class="string">'李四'</span>, <span class="attr">age</span>: <span class="number">24</span> &#125;,</div><div class="line">&#123; <span class="attr">name</span>: <span class="string">'王五'</span>, <span class="attr">age</span>: <span class="number">28</span> &#125;</div><div class="line">].sort(<span class="function"><span class="keyword">function</span>(<span class="params">o1, o2</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> o1.age - o2.age</div><div class="line">    &#125;)</div><div class="line"><span class="comment">//按年龄从小到大排序。</span></div></pre></td></tr></table></figure>
<ol>
<li><p>map()<br>该方法对数组的所有成员一次调用一个函数，根据函数结果返回一个新数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">numbers.map(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> n+<span class="number">1</span>;</div><div class="line">    &#125;)</div><div class="line"><span class="comment">//[2, 3, 4]</span></div><div class="line">numbers <span class="comment">// [1, 2, 3]</span></div></pre></td></tr></table></figure>
<p>原数组不变。<br>map方法接受一个函数作为参数，该函数调用时，map方法会将其传入三个参数，分别是当前成员，当前位置和数组本身。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> elem * index;</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<p>map不仅仅可以用于数组，还可以用于字符串，用来遍历字符串的每个字符。但是，不能直接使用，而要通过函数call方法间接使用，或者先将字符串转为数组，然后使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> upper = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x.toUpperCase();</div><div class="line">&#125;;</div><div class="line">[].map.call(<span class="string">'abc'</span>, upper); <span class="comment">//['A', 'B', 'C']</span></div><div class="line"><span class="comment">//或者</span></div><div class="line"><span class="string">'abc'</span>.split(<span class="string">''</span>).map(upper); <span class="comment">//['A', 'B', 'C']</span></div></pre></td></tr></table></figure>
<p>其他类似数组对象，也可以用上面的方法遍历。<br>map方法还可以接收第二个参数，表示回调函数执行时this所指向的对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[e]</div><div class="line">    &#125;, arr)</div><div class="line"><span class="comment">//['b', 'c']</span></div></pre></td></tr></table></figure>
<p>如果数组有空位，map方法的回调函数在这个位置不会执行，会跳过数组的空位。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123; <span class="keyword">return</span> n+<span class="number">1</span>; &#125;;</div><div class="line">[<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">2</span>].map(f); <span class="comment">//[2, NaN, 3]</span></div><div class="line">[<span class="number">1</span>, <span class="literal">null</span>, <span class="number">2</span>].map(f) <span class="comment">//[2, 1,3]</span></div><div class="line">[<span class="number">1</span>, , <span class="number">2</span>]; <span class="comment">//[2, , 3]</span></div></pre></td></tr></table></figure>
<p>map方法不会跳过undefined和null，但是会跳过空位。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>(<span class="number">2</span>).map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'enter ...'</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;)</div><div class="line"><span class="comment">//[,,]</span></div></pre></td></tr></table></figure>
</li>
<li><p>forEach()<br>forEach方法与map方法很相似，也是遍历数组的所有成员，执行某种操作，但是forEach方法一般不返回值，只用来操作数据。如果需要有返回值，使用map方法。</p>
<p>forEach方法的参数与map方法一致，也是一个函数，数组的所有成员一次执行该函数。它接收三个参数，分别是当前位置的值，当前位置的编号，和整个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">element, index ,array</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'['</span> + index + <span class="string">']='</span> + element);</div><div class="line">&#125;</div><div class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>].forEach(log);</div></pre></td></tr></table></figure>
<p>forEach遍历数组不是为了得到返回值，而是为了在屏幕输出内容，所以应该使用forEach方法，而不是map方法，</p>
<p>forEach方法也可以接收第二个参数，用来绑定回调函数this关键字。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">var</span> out = [];</div><div class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</div><div class="line">      <span class="keyword">this</span>.push(elem * elem);</div><div class="line">      &#125;, out);</div><div class="line">  out <span class="comment">//[1, 4, 9]</span></div><div class="line">  </div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'张三'</span>,</div><div class="line">  <span class="attr">times</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  <span class="attr">print</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.times.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">obj.print()</div><div class="line"><span class="comment">// 没有任何输出</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'张三'</span>,</div><div class="line">  <span class="attr">times</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  <span class="attr">print</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.times.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;, <span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">obj.print()</div><div class="line"><span class="comment">// 张三</span></div><div class="line"><span class="comment">// 张三</span></div><div class="line"><span class="comment">// 张三</span></div></pre></td></tr></table></figure>
<p>注意，forEach方法无法中断执行，总是会将所有成员遍历完。如果希望复合条件时，就中断遍历，要使用for循环。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr  = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;arr.length;i++)&#123;</div><div class="line">  <span class="keyword">if</span>(arr[i] === <span class="number">2</span>) <span class="keyword">break</span>;</div><div class="line">  <span class="built_in">console</span>.log(arr[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行代码第二个成员时，就会中断执行。forEach方法做不到这一点。<br>forEach方法也会跳过数组的空位。跟map一样。<br>同样也可以用于类似数组的对象，和字符串用call</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.forEach.call</div></pre></td></tr></table></figure>
</li>
<li><p>filter()<br>filter方法的参数是是一个函数，所有数组成员依次执行该函数，返回结果为true的成员组成一个新数组返回。该方法不会改变原数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> (elem ? <span class="number">3</span>);</div><div class="line">    &#125;)</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="literal">false</span>];</div><div class="line">arr.filter(<span class="built_in">Boolean</span>) <span class="comment">//[1, 'a']</span></div></pre></td></tr></table></figure>
<p>filter方法的参数函数可以接收三个参数，第一个参数当前数组成员的值，这是必须的，后边两个参数是可选的，分别是当前数组成员的位置和整个数组。<br>filter方法也可以接收第二个参数，指定测试函数所在的上下文对象(this对象)。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">var</span> Obj = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.MAX = <span class="number">3</span>;</div><div class="line">  &#125;;</div><div class="line"><span class="keyword">var</span> myFilter = <span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(item &gt; <span class="keyword">this</span>.MAX)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">2</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>];</div><div class="line">arr.filter(myFilter, <span class="keyword">new</span> Obj())</div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>some(), every()<br>这两个方法类似”断言”，用来判读数组成员是否符合某种条件。<br>他们接受一个函数作为参数，所有数组成员一次执行该函数，返回一个布尔值。该函数接收三个参数，同上。<br>some方法是只要有一个数组成员返回值是true，则整个some方法的返回值就是true，否则false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> elem &gt;=<span class="number">3</span>;</div><div class="line">    &#125;)</div><div class="line"><span class="comment">//true</span></div></pre></td></tr></table></figure>
<p>如果存在大于3的成员，就返回true。<br>every方法则是所有数组成员的返回值都是true，才返回true，否则false。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">elem, index, arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> elem &gt;=<span class="number">3</span>;</div><div class="line">    &#125;)</div><div class="line"><span class="comment">//false</span></div></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>对于空数组，some方法返回false，every方法返回true,回调函数都不会执行。</p>
</blockquote>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEven</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> x % <span class="number">2</span> === <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line">[].some(isEven) <span class="comment">//false</span></div><div class="line">[].every(isEven) <span class="comment">//true</span></div></pre></td></tr></table></figure>
<p>  some和every方法还可以接收第二个参数，用来绑定函数中this关键字。</p>
<ol>
<li><p>reduce(), reduceRight()<br>reduce方法和reduceRight方法一次处理数组的每个成员，最终累计为一个值。<br>他们的的差别是，reduce是从左到右处理(从第一个成员到最后一个成员)，reduceRight则是从右到左(从最后一个成员到第一个成员)，其他完全一样。<br>这两个方法的第一个参数都是一个函数。该函数接收一下四个参数。</p>
<ul>
<li>累积变量，默认为数组的第一个成员</li>
<li>当前变量，默认为数组的第二个成员</li>
<li>当前位置，从零开始</li>
<li>原数组</li>
</ul>
<p>只有前两个是必须的，后两个则是可选的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(x,y);</div><div class="line">    <span class="keyword">return</span> x+ y;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line"><span class="comment">//1 2</span></div><div class="line"><span class="comment">//3 3</span></div><div class="line"><span class="comment">//6 4</span></div><div class="line"><span class="comment">//10 5</span></div><div class="line"><span class="comment">//最后结果为：15</span></div></pre></td></tr></table></figure>
<p>利用reduce方法，可以写一个数组求和的sum方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.sum = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">partial, value</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> partial + value;</div><div class="line">      &#125;)</div><div class="line">&#125;;</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>].sum();</div></pre></td></tr></table></figure>
<p>如果要对积累变量指定初值，可以把它放在reduce方法和reduceRight方法的第二个参数里。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> x + y;</div><div class="line">    &#125;, <span class="number">10</span>)</div><div class="line"><span class="comment">//25</span></div></pre></td></tr></table></figure>
<p>代码指定参数x的初值为10，所以数组从10开始累加，最终结果为25.注意这时y是从数组的第一个成员开始遍历的。<br>第二个参数相当于设定了默认值，处理空数组尤其有用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">prev, cur</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> prev + cur;</div><div class="line">&#125;</div><div class="line">[].reduce(add) <span class="comment">//TypeError: Reduce of empty array with no initial value</span></div><div class="line">[].reduce(add, <span class="number">1</span>) <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>由于空数组取不到初始值，reduce方法会报错，这时，加上第二个参数，就保证总是返回一个值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">substract</span>(<span class="params">prev, cur</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> prev - cur;</div><div class="line">&#125;</div><div class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>].reduce(substract) <span class="comment">//0</span></div><div class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>].reduceRight(substract) <span class="comment">// 4</span></div></pre></td></tr></table></figure>
<p>由于reduce方法一次处理每个元素，所以实际上还可以用它来搜索某个元素，比如下面代码找出长度最长的数组元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">findLongest</span>(<span class="params">entries</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> entries.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">longest, entry</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> entory.length &gt; longest.length ? entry : longest;</div><div class="line">      &#125;, <span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">findLongest([<span class="string">'aaa'</span>, <span class="string">'bb'</span>, <span class="string">'c'</span>]); <span class="comment">//'aaa'</span></div></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>indexOf(), lastIndexOf()<br>indexOf方法返回给定元素在数组中第一次出现的位置，如果么有出现则返回-1.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</div><div class="line">a.indexOf(<span class="string">'b'</span>); <span class="comment">//1</span></div><div class="line">a.indexOf(<span class="string">'y'</span>); <span class="comment">//-1</span></div></pre></td></tr></table></figure>
<p>indexOf方法还可以接收第二个参数，表示搜索的开始位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>].indexOf(<span class="string">'a'</span>, <span class="number">1</span>) <span class="comment">//-1</span></div></pre></td></tr></table></figure>
<p>lastIndexOf方法返回给定元素在数组中最后一次出现的位置，如果没有出现则返回-1.用法同indexOf.</p>
<blockquote>
<p>如果数组中包含NaN，这两个方法不适用，即无法确定数组成员是否包含NaN。因为方法内部使用相等运算符进行比较，而NaN是唯一一个不等于自身的值。</p>
</blockquote>
</li>
<li><p>链式使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> users = [</div><div class="line">  &#123;<span class="attr">name</span>: <span class="string">'tom'</span>, <span class="attr">email</span>: <span class="string">'tom@example.com'</span>&#125;,</div><div class="line">  &#123;<span class="attr">name</span>: <span class="string">'peter'</span>, <span class="attr">email</span>: <span class="string">'peter@example.com'</span>&#125;</div><div class="line">];</div><div class="line"></div><div class="line">users</div><div class="line">.map(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> user.email;</div><div class="line">&#125;)</div><div class="line">.filter(<span class="function"><span class="keyword">function</span> (<span class="params">email</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="regexp">/^t/</span>.test(email);</div><div class="line">&#125;)</div><div class="line">.forEach(alert);</div><div class="line"><span class="comment">// 弹出tom@example.com</span></div></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yulongge.github.io/2017/01/13/ArrayAPI/" data-id="cj4p6jhmd0038cxs6ncuygd2q" class="article-share-link">Partager</a>
      
        <a href="http://yulongge.github.io/2017/01/13/ArrayAPI/#disqus_thread" class="article-comment-link">Commentaires</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/book/">book</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ruanyifeng/">ruanyifeng</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/01/17/StringAPI/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          String API
        
      </div>
    </a>
  
  
    <a href="/2017/01/12/ObjectAPI/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">Object API</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Event/">Event</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JSON/">JSON</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/web/JSONP/">JSONP</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/">Javascript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/ES6/">ES6</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Javascript/ES6/Promise/">Promise</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/book/">book</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/http/https/">https</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/iTerm2/">iTerm2</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mvvm/">mvvm</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mvvm/mvc/">mvc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/mvvm/mvc/mvp/">mvp</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/JavaScript/">JavaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/web/JavaScript/Promise/">Promise</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/JavaScript/css/">css</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Context/">Context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cookie/">Cookie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event/">Event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSONP/">JSONP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JvaScript/">JvaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RegExp/">RegExp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scope/">Scope</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Storage/">Storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/URI/">URI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event/">event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iTerm2/">iTerm2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvc/">mvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvp/">mvp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvvm/">mvvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruanyifeng/">ruanyifeng</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/">this</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Context/" style="font-size: 10px;">Context</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/Event/" style="font-size: 10px;">Event</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/JSONP/" style="font-size: 10px;">JSONP</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/JvaScript/" style="font-size: 10px;">JvaScript</a> <a href="/tags/Promise/" style="font-size: 12.5px;">Promise</a> <a href="/tags/RegExp/" style="font-size: 12.5px;">RegExp</a> <a href="/tags/Scope/" style="font-size: 10px;">Scope</a> <a href="/tags/Storage/" style="font-size: 10px;">Storage</a> <a href="/tags/URI/" style="font-size: 12.5px;">URI</a> <a href="/tags/book/" style="font-size: 17.5px;">book</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/iTerm2/" style="font-size: 10px;">iTerm2</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mvc/" style="font-size: 10px;">mvc</a> <a href="/tags/mvp/" style="font-size: 10px;">mvp</a> <a href="/tags/mvvm/" style="font-size: 10px;">mvvm</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/ruanyifeng/" style="font-size: 17.5px;">ruanyifeng</a> <a href="/tags/this/" style="font-size: 12.5px;">this</a> <a href="/tags/vim/" style="font-size: 12.5px;">vim</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/04/studyInsight/">(no title)</a>
          </li>
        
          <li>
            <a href="/2017/06/13/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/01/24/this/">this</a>
          </li>
        
          <li>
            <a href="/2017/01/23/npm/">从头开始写一个npm包</a>
          </li>
        
          <li>
            <a href="/2017/01/17/StringAPI/">String API</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Ge Yulong<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'yulongge-github-io';
  
  var disqus_url = 'http://yulongge.github.io/2017/01/13/ArrayAPI/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>